<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FX 15問ドリル（ダウ理論・水平線・MA）</title>
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; background:#0f172a; color:#e5e7eb; margin:0; padding:16px; }
    .card { max-width: 900px; margin: auto; background:#020617; border-radius:16px; padding:16px; box-shadow: 0 10px 30px rgba(0,0,0,.4); }
    h1 { font-size:20px; margin:0 0 8px; }
    .muted { color:#94a3b8; font-size:12px; }
    .row { display:flex; gap:8px; flex-wrap:wrap; }
    select, input, button { background:#020617; color:#e5e7eb; border:1px solid #1e293b; border-radius:10px; padding:10px; }
    button { cursor:pointer; }
    button.primary { background:#2563eb; border-color:#2563eb; }
    button.ghost { background:transparent; }
    .qbox { margin-top:12px; padding:12px; border:1px solid #1e293b; border-radius:12px; }
    .opts button { width:100%; margin-top:6px; }
    .ok { border-color:#16a34a; }
    .ng { border-color:#dc2626; }
    .badge { display:inline-block; padding:2px 8px; border-radius:999px; background:#020617; border:1px solid #1e293b; font-size:12px; }
    svg { width:100%; max-width:520px; background:#020617; border-radius:12px; border:1px solid #1e293b; }
    footer { margin-top:12px; font-size:12px; color:#94a3b8; }
  </style>
</head>
<body>
  <div class="card">
    <h1>FX 15問ドリル（ダウ理論・水平線・MA）</h1>
    <div class="muted">URLを配るだけで動く教材（GitHub Pages対応）</div>

    <div class="row" style="margin-top:8px;">
      <select id="pair">
        <option>USDJPY</option><option>EURUSD</option><option>GBPJPY</option>
        <option>XAUUSD(GOLD)</option><option>BTCUSD</option><option>ETHUSD</option>
      </select>
      <input id="lot" type="number" step="0.01" placeholder="ロット数（例: 0.10）"/>
      <span class="badge" id="progress">1 / 15</span>
    </div>

    <div class="qbox" id="qbox">
      <div id="qtext">問題が表示されます</div>
      <div id="figure" style="margin-top:8px;"></div>
      <div class="opts" id="opts"></div>
    </div>

    <div class="row" style="margin-top:8px;">
      <button class="ghost" onclick="prevQ()">戻る</button>
      <button class="primary" onclick="nextQ()">次へ</button>
      <button onclick="resetAll()">リセット</button>
    </div>

    <footer>※ 教材用：結果は端末内に保存されます。</footer>
  </div>

<script>
const figures = {
  uptrend: `
  <svg viewBox="0 0 600 260">
    <polyline points="20,200 120,160 220,170 320,120 420,130 520,80" fill="none" stroke="#60a5fa" stroke-width="4"/>
    <line x1="20" y1="220" x2="520" y2="220" stroke="#64748b" stroke-dasharray="6"/>
    <text x="20" y="30" fill="#94a3b8">上昇トレンド（高値切り上げ・安値切り上げ）</text>
  </svg>`,
  range: `
  <svg viewBox="0 0 600 260">
    <line x1="20" y1="80" x2="520" y2="80" stroke="#22c55e" stroke-width="3"/>
    <line x1="20" y1="200" x2="520" y2="200" stroke="#ef4444" stroke-width="3"/>
    <polyline points="40,160 120,120 200,170 280,130 360,165 440,125 520,160" fill="none" stroke="#e5e7eb" stroke-width="3"/>
    <text x="20" y="30" fill="#94a3b8">レンジ（レジスタンス／サポート）</text>
  </svg>`,
  ma: `
  <svg viewBox="0 0 600 260">
    <polyline points="20,200 120,170 220,190 320,140 420,150 520,110" fill="none" stroke="#e5e7eb" stroke-width="3"/>
    <polyline points="20,210 120,180 220,170 320,160 420,140 520,130" fill="none" stroke="#f59e0b" stroke-width="3"/>
    <text x="20" y="30" fill="#94a3b8">価格（白）と移動平均線（橙）</text>
  </svg>`
};

const qs = [
  {q:"ダウ理論の基本は？", a:1, o:["安値だけを見る","高値切り上げ＋安値切り上げ","MAだけを見る"], f:"uptrend"},
  {q:"上昇トレンドの定義は？", a:0, o:["高値・安値が切り上げ","高値だけ切り上げ","安値だけ切り下げ"], f:"uptrend"},
  {q:"レンジ相場の特徴は？", a:2, o:["高値更新し続ける","安値更新し続ける","一定の上下幅で推移"], f:"range"},
  {q:"水平線は何に引く？", a:1, o:["適当な位置","反発・意識された価格","ローソクの真ん中"], f:"range"},
  {q:"レジサポ転換とは？", a:0, o:["抵抗が支持に変わる現象","ラインを消すこと","MAを変える"], f:"range"},
  {q:"移動平均線の役割は？", a:2, o:["予言する","ラインを増やす","トレンドの目安"], f:"ma"},
  {q:"MAの上に価格→？", a:0, o:["上昇優勢","下落優勢","レンジ確定"], f:"ma"},
  {q:"高値切り下げは？", a:1, o:["上昇","下降","無関係"], f:"uptrend"},
  {q:"安値切り上げは？", a:0, o:["上昇","下降","無関係"], f:"uptrend"},
  {q:"水平線引きすぎは？", a:2, o:["OK","精度UP","判断がブレる"], f:"range"},
  {q:"MAだけで入るのは？", a:1, o:["安全","危険","必勝"], f:"ma"},
  {q:"レンジ上限付近の基本は？", a:0, o:["売り検討","買い検討","放置"], f:"range"},
  {q:"トレンド中の押し目は？", a:2, o:["逆張り","無視","順張りチャンス"], f:"uptrend"},
  {q:"ダウの否定条件は？", a:1, o:["高値更新","安値更新される","MAタッチ"], f:"uptrend"},
  {q:"環境認識で大事なのは？", a:0, o:["上位足の流れ","気分","直感"], f:"uptrend"},
];

let i = 0;
let score = 0;
const progress = document.getElementById('progress');
const qtext = document.getElementById('qtext');
const opts = document.getElementById('opts');
const figure = document.getElementById('figure');
const box = document.getElementById('qbox');

function render(){
  const q = qs[i];
  progress.textContent = (i+1) + " / 15";
  qtext.textContent = "Q" + (i+1) + ". " + q.q;
  figure.innerHTML = figures[q.f] || "";
  opts.innerHTML = "";
  box.className = "qbox";
  q.o.forEach((t, idx)=>{
    const b = document.createElement('button');
    b.textContent = t;
    b.onclick = ()=>answer(idx);
    opts.appendChild(b);
  });
}
function answer(idx){
  const q = qs[i];
  if(idx === q.a){
    box.classList.add('ok');
  }else{
    box.classList.add('ng');
  }
}
function nextQ(){ if(i<qs.length-1){ i++; render(); } }
function prevQ(){ if(i>0){ i--; render(); } }
function resetAll(){ i=0; render(); }

render();
</script>
</body>
</html>
